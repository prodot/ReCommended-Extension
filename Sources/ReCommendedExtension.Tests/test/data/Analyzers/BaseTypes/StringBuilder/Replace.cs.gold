using System;
using System.Text;

namespace Test
{
    public class StringBuilders
    {
        public void RedundantInvocation(StringBuilder builder)
        {
            var result1 = builder.|Replace("abc", "abc")|(0);
            var result2 = builder.|Replace('a', 'a')|(1);

            |builder.Replace("abc", "abc")|(2);
            |builder.Replace('a', 'a')|(3);
        }

        public void RedundantInvocation_Nullable(StringBuilder? builder)
        {
            var result = builder?.|Replace("abc", "abc")|(4);

            |builder?.Replace("abc", "abc")|(5);
        }

        public void SingleCharacter(StringBuilder builder, int startIndex, int count)
        {
            var result1 = builder.Replace("a", "b");
            var result2 = builder.Replace("a", "b", startIndex, count);

            builder.Replace("a", "b");
            builder.Replace("a", "b", startIndex, count);
        }

        public void SingleCharacter_Nullable(StringBuilder? builder, int startIndex, int count)
        {
            var result1 = builder?.Replace("a", "b");
            var result2 = builder?.Replace("a", "b", startIndex, count);

            builder?.Replace("a", "b");
            builder?.Replace("a", "b", startIndex, count);
        }

        public void NoDetection(StringBuilder builder)
        {
            var result1 = builder.Replace("ab", "abc");
            var result2 = builder.Replace('a', 'b');
        }
    }
}
---------------------------------------------------------
(0): ReSharper Dead Code: Calling 'Replace' with identical values is redundant.
(1): ReSharper Dead Code: Calling 'Replace' with identical characters is redundant.
(2): ReSharper Dead Code: Calling 'Replace' with identical values is redundant.
(3): ReSharper Dead Code: Calling 'Replace' with identical characters is redundant.
(4): ReSharper Dead Code: Calling 'Replace' with identical values is redundant.
(5): ReSharper Dead Code: Calling 'Replace' with identical values is redundant.
